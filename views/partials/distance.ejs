<script>
	var latLng;
	var lat;
	var lng;
	var location;

	function getLocation(callback) {
		if (navigator.geolocation) {
			navigator.geolocation.getCurrentPosition(userLocation.bind(null, callback));
			// console.log(coords);
		} else {
			alert("Looks like geolocation is not supported.");
		}
	}

	function userLocation(callback, position) {
		var lat = position.coords.latitude;
		var lng = position.coords.longitude;
		var latLng = new google.maps.LatLng(lat, lng);
		callback(lat, lng);
	}

	function getDistance(address, lat, lng, context) {
		var key = "AIzaSyDCtDV0aY7IdfyS0HPw6M0AmJaQe9DPTTY";
		var location = address;
		axios.get("https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&origins=" + lat + "," + lng + "&destinations=" + location + "&key=" + key 
		).then(function(response) {

		var distance = response.data.rows[0].elements[0].distance.text;
		console.log(distance);
		context.parent().parent().find('.distance .milage').append(distance);
		context.parent().parent().find('#address .address-link').attr("href", "https://www.google.com/maps/dir/" +lat + "," + lng + "/" + location);

		// document.getElementById("milage").innerHTML = distance;

		})
		.catch(function(error) {
			console.log(error)
		})
	}
</script>
<script async defer
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDCtDV0aY7IdfyS0HPw6M0AmJaQe9DPTTY">
</script>
